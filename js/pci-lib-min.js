(function(){var c=[],a=[];c[0]="Dimanche";c[1]="Lundi";c[2]="Mardi";c[3]="Mercredi";c[4]="Jeudi";c[5]="Vendredi";c[6]="Samedi";a[0]="janvier";a[1]="f\u00e9vrier";a[2]="mars";a[3]="avril";a[4]="mai";a[5]="juin";a[6]="juillet";a[7]="ao\u00fbt";a[8]="septembre";a[9]="octobre";a[10]="novembre";a[11]="d\u00e9cembre";Date.prototype.daysArray=c;Date.prototype.monthsArray=a;String.prototype.dateFromDotNet=function(){var b=this.substring(6,this.length-2);return new Date(parseInt(b))};Date.prototype.toTimeString=
function(b,f){var a=10>this.getHours()?"0"+this.getHours():this.getHours(),e=10>this.getMinutes()?"0"+this.getMinutes():this.getMinutes(),c=10>this.getSeconds()?"0"+this.getSeconds():this.getSeconds(),a=[a,e];f&&a.push(c);return a.join(b)};Date.prototype.toFR=function(b){var a=["Le",this.daysArray[this.getDay()],this.getDate(),this.monthsArray[this.getMonth()],this.getFullYear()];b&&a.push("\u00e0",this.toTimeString(":"));return a.join(" ")};Date.prototype.toIlya=function(){var b=new Date,a=b-this,
d=[],e;6E4>a?d.push("Il y a quelques secondes"):36E5>a?(b=Math.round(a/1E3/60),d.push("Il y a",b),d.push(1<b?"minutes":"minute")):72E5>a?d.push("Il y a environ une heure"):b.getDay()==this.getDay()?(b=this.toFR(!0),a=b.indexOf("\u00e0"),d.push("",b.substr(a+2))):1==b.getDay()-this.getDay()?(b=this.toFR(!0),a=b.indexOf("\u00e0"),d.push("Hier,",b.substr(a))):6048E5>a?(b=this.toFR(!0),a=b.indexOf("\u00e0"),e=[b.split(" ")[1],","],d.push(e.join(""),b.substr(a))):d.push(this.toFR(!0));return d.join(" ")}})();(function(){var c={actus:{get:function(a,b){if("string"!=typeof a||"number"!=typeof b)throw"Impossible de rappatrier les actualit\u00e9s. Un des param\u00e8tres indiqu\u00e9 n'\u00e9tait pas valide";var f=!1,d=[];if(""!=a||0<b)""!=a&&d.push("redacteur=",encodeURIComponent(a),"&"),0<b&&d.push("nb_news=",b),f=!0;var f=JSON.parse(c.tools.executeSyncRequest("POST","http://www.pcinpact.com/ReadApi/ListActu",d.join(""),f)),e;for(e in f.List){var d=f.List[e].PublishDate.dateFromDotNet(),g=d.toFR(!1);f.List[e].PublishDate=
{date:g,time:d.toTimeString(":"),old_format:f.List[e].PublishDate}}f.lastUpdateDate=(new Date).toString();return f},check:function(){var a=c.actus.get("",0),b={};if(localStorage.PCiActusLastCheck){var b=JSON.parse(localStorage.PCiActusLastCheck),f=[];if(a.List[0].Id!=b.List[0].Id||a.NbNews!=b.NbNews)for(var d in a.List){var e=a.List[d],g=b.List,h=!0,i=void 0;for(i in g)if(g[i].Id==e.Id&&g[i].PublishDate.old_format==e.PublishDate.old_format){h=!1;break}h&&f.push(a.List[d])}b={List:f}}else c.tools.logMessage("Premi\u00e8re v\u00e9rification des actualit\u00e9s",
!1);localStorage.PCiActusLastCheck=JSON.stringify(a);b.lastUpdateDate=(new Date).toString();return b}},emploi:{get:function(a){c.tools.executeAsyncRequestV2("GET","http://www.pcinpact.com/rss/emplois.xml","document",function(b){for(var b=b.response.getElementsByTagName("item"),f=[],d={},e=0;e<b.length;e++){var c={};c.title=b[e].getElementsByTagName("title")[0].childNodes[0].nodeValue;c.url=b[e].getElementsByTagName("link")[0].childNodes[0].nodeValue;c.description=b[e].getElementsByTagName("description")[0].childNodes[0].nodeValue;
f.push(c)}d.list=f;d.lastUpdateDate=(new Date).toString();d.error=!1;a(d)})}},forum:{get:function(a){c.tools.executeAsyncRequestV2("GET","http://forum.pcinpact.com/","document",function(b){var f=b.response.getElementById("user_link"),d=b.response.getElementById("index_stats").getElementsByClassName("bbc_member")[0],e={};e.last_update_date=(new Date).toString();d&&(e.gagnant={name:d.innerText,url:d.href});if(null!=f){d=b.response.getElementById("inbox_link");b=b.response.getElementById("notify_link");
"%C2%A0"==encodeURIComponent(d.innerText)&&(d.innerText="0");"%C2%A0"==encodeURIComponent(b.innerText)&&(b.innerText="0");var c=d.href,h=b.href;e.messages={count:parseInt(d.innerText),url:c};e.notifications={count:parseInt(b.innerText),url:h};e.user={name:f.innerText,url:f.href};e.isLoggedIn=!0}else e.isLoggedIn=!1;a(e)})}},user:{getInfos:function(){var a=JSON.parse(c.tools.executeSyncRequest("POST","http://www.pcinpact.com/ReadApi/UserInfo","",!1));a.lastUpdateDate=(new Date).toString();return a}}};
window.PCi||(window.PCi=c)})();(function(){var c={getBonsPlans:function(a){PCi.tools.executeAsyncRequestV2("GET","http://www.prixdunet.com/bon-plan.html?motcle=&type=0&order=nb_lectures&way=desc","document",function(b){for(var f={},d=[],e=b.response.getElementById("list_bp").getElementsByClassName("bp_table"),b=b.response.getElementById("list_bp").getElementsByClassName("bp_titre"),c=0;c<b.length;c++)f={titre:b[c].getElementsByTagName("a")[0].innerText,date:b[c].getElementsByTagName("span")[0].innerText,categorie:{img:e[c].getElementsByTagName("img")[0].src,
url:e[c].getElementsByTagName("a")[0].href},url:b[c].getElementsByTagName("a")[0].href},d.push(f),f={list:d,lastUpdateDate:(new Date).toString(),error:!1};a(f)})}};window.PdN||(window.PdN=c)})();(function(){var c;c={getQRCodeURL:function(a,b){return["http://api.qrserver.com/v1/create-qr-code/?size=",b,"x",b,"&data=",encodeURI(a)].join("")},getSocialCount:function(a){var b=JSON.parse(c.executeSyncRequest("GET","https://graph.facebook.com/?ids="+a,!1)).shares,a=JSON.parse(c.executeSyncRequest("GET","http://urls.api.twitter.com/1/urls/count.json?url="+a,!1)).count,f=c.stringToInt(b)+c.stringToInt(a);return{facebook:b,twitter:a,total:f}},executeSyncRequest:function(a,b,c,d){var e=new XMLHttpRequest;
d&&e.setRequestHeader("Content-Type', 'application/x-www-form-urlencoded");e.open(a,b,!1);e.send(c);return e.responseText},executeAsyncRequestV2:function(a,b,c,d){var e=new XMLHttpRequest;e.open(a,b,!0);e.responseType=c;e.onload=function(){200==this.status&&d(this)};e.send(null)},logMessage:function(a,b){if(localStorage.PCiEnableLog||b){var c=[];b&&c.push("### Erreur ###");c.push((new Date).toFR(!0),"-",a);console.log(c.join(" "))}},stringToInt:function(a){var b=0;a&&(b=parseInt(a));return b},urlToLocalBlob:function(a,
b){c.executeAsyncRequestV2("GET",a,"blob",function(a){var a=new Blob([a.response],{type:"image/png"}),c=new FileReader;c.readAsDataURL(a);c.onload=function(a){b(a.target.result)}})}};window.PCi&&!window.PCi.tools&&(window.PCi.tools=c)})();
